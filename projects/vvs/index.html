<html>
	<head>
		<title>A Distributed Virtual Vision Simulator</title>
		<meta name="author" content="Wiktor Starzyk, Faisal Z. Qureshi"/>
		<meta name="description" content="We present a distributed, customizable
virtual vision simulator capable of simulating pedestrian traffic
in a variety of 3D environments. Virtual cameras deployed in
this synthetic environment generate synthetic imagery—boasting
realistic lighting effects, shadows, etc.—using the state-of-the-art
computer graphics techniques. The synthetic imagery is fed into
a “real-world” vision pipeline that performs visual analysis—
e.g., blob detection and tracking, facial detection, etc.—and
returns the results of this analysis to our simulated cameras
for subsequent higher level processing. It is important to bear
in mind that our vision pipeline is designed to handle real
world imagery without any modifications. Consequently, it closely
mimics the performance of a vision pipeline that one might deploy
on physical cameras. Our virtual vision simulator is realized
as a collection of modules that communicate with each other
over the network. Consequently, we can deploy our simulator
over a network of computers, allowing us to simulate much
larger networks and much more complex scenes then is otherwise
possible.
"/>
        <link href="js/google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />

            <link rel="stylesheet" href="../../style/bootstrap-3.3.7-dist/css/bootstrap.min.css" type="text/css" />

     	<link rel="stylesheet" type="text/css" href="site.css" />
	<link rel="stylesheet" type="text/css" href="project.css" />

    <link href="http://fonts.googleapis.com/css?family=Ubuntu:bold" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Vollkorn" rel="stylesheet" type="text/css">
 <link href="http://fonts.googleapis.com/css?family=Molengo"
    rel="stylesheet" type="text/css">

    <script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-28175853-1']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();

</script>
    	<script type="text/javascript" src="js/google-code-prettify/prettify.js"></script>
	</head>

	<body class="oneColElsCtr" onLoad="prettyPrint()">
        <div id="container">
            <div id="mainContent">

                 <div class="title">
                <h1> A Distributed Virtual Vision Simulator</h1>
                <h2>
                    <a href="http://www.wiktorstarzyk.com">Wiktor Starzyk</a> and <a href="http://faculty.uoit.ca/qureshi/">Faisal Z. Qureshi</a>
                </h2>
                </div>

                <img src="media/multicamera.png" width=100%/>

                <h2>Synopsis</h2>

                <p>Realistic virtual worlds can serve as laboratories for carrying out camera networks research. This unorthodox "Virtual Vision" paradigm advocates developing visually and behaviorally realistic 3D environments to serve the needs of computer vision. Our work on high-level coordination and control in camera networks is a testament to the suitability of virtual vision paradigm for camera networks research. The prerequisite for carrying out virtual vision research is a virtual vision simulator capable of generating synthetic imagery from simulated real-life scenes. Here we present a distributed, customizable virtual vision simulator capable of simulating pedestrian traffic in a variety of 3D environments. Virtual cameras deployed in this synthetic environment generate synthetic imagery&mdash;boasting realistic lighting effects, shadows, etc.&mdash;using the state-of-the-art computer graphics techniques.  Our virtual vision simulator is realized as a collection of modules that communicate with each other over the network. Consequently, we can deploy our simulator over a network of computers, allowing us to simulate much larger networks and much more complex scenes then is otherwise possible.                </p>
                <h2>How to get it for your own research?</h2>
                <p>We have released the our virtual vision simulator to the community under GNU General Public License V3.0 in order to support virtual vision and camera networks research. Please feel free to download the code from Github repository and use it for your own research. Please send us bug fixes and improvements, so we may integrate them into the virtual vision simulator. Notice that if you want to use parts of our code in a commercial product they will need to comply with the <a href="http://www.gnu.org/copyleft/gpl.html">GPLv3</a> license (all derived products are required to be open source).</p><p>Thanks to (annevanrossum@gmail.com) for helping us with the above wording.<p>
                <p><span class="emphasize">Instructions about how to download, install and use our virtual vision simulator are provided below.</span></p>
                <h3>Caveat</h3>
                <p>We purchased pedestrian models (textures and motion capture data) from <a href="http://www.axyz-design.com/">aXYZ Design</a>, which hold the copyright to the pedestrian models. Licensing prevents us from distributing these models. You will have to purchase these models for our simulator to work properly.                </p>
                <p>If you are brave you may be able to use your own pedestrian models to work with our simulator. The simulator simply needs a textured human with animation data. If you plan to use your own pedestrian models, let us know. Time permitting we might be able to work together to get things rolling. </p>
                <h3>Citation</h3>
                <p><span class="emphasize">Please cite the following publications when using our simulator for research. Thank you!</span></p>

              <p>&quot;<a href="../../pubs/08-pieee-j.pdf"  class="papertitle">Smart Camera Networks in Virtual Reality</a>,&quot; <span class="paperauthfzq">F.Z. Qureshi</span>, D. Terzopoulos, <span class="papervenue">Proceedings of the IEEE</span>, <strong>96</strong>(10), October, 2008, 1640&mdash;1656, (Special Issue on &quot;Smart Cameras&quot;).</p>

               <p>&quot;<span class="papertitle">Software laboratory for camera networks research</span>,&quot; W. Starzyk,<span class="paperauthfzq"> F.Z. Qureshi</span>, <span class="papervenue">IEEE Journal on Emerging and Selected Topics in Circuits and Systems (special issue on "Computational and Smart Cameras)</span>, vol. 3, iss. 2, pp. 284-293, 2013.</p>

              <h2>Publications</h2>
              <p>This simulator is introduced in the following publications.</p>
              <p>&quot;<span class="papertitle">Software laboratory for camera networks research</span>,&quot; W. Starzyk,<span class="paperauthfzq"> F.Z. Qureshi</span>, <span class="papervenue">IEEE Journal on Emerging and Selected Topics in Circuits and Systems (special issue on "Computational and Smart Cameras)</span>, vol. 3, iss. 2, pp. 284-293, 2013.</p>

                  <h2>Projects that used this Simulator</h2>
                  <p>We used the current simulator to carry out camera networks research, which lead to the following two publications.</p>
              <p>&quot;<span class="papertitle"><a href="http://vclab.ca/wp-content/papercite-data/pdf/11-icdsc-c.pdf">Learning Proactive Control Strategies for PTZ Cameras</a></span>,'' F.Z. Qureshi, W. Starzyk, <span class="papervenue"> Proc. 5th ACM/IEEE International Conference on Distributed Smart Cameras (ICDSC 11)</span>, Ghent, Belgium, August, 2011, 1&mdash;6.</p>

                    <p>&quot;<span class="papertitle"><a href="http://vclab.ca/wp-content/papercite-data/pdf/11-avss-c.pdf">Multitasking Smart Cameras for Intelligent Video Surveillance Systems</a></span>,'' W. Starzyk, F.Z. Qureshi, <span class="papervenue"> Proc. 8th IEEE International Conference on Advanced Video and Signal-Based Surveillance (AVSS 11)</span>, Klagenfurt, Austria, August, 2011, 1&mdash;6.</p>


                <h2>Videos</h2>
                <h3>Multi-tasking PTZ Cameras</h3>

                    <p class="caption">A video showing our simulator in action tracking pedestrians using a Vision Processing Client developed by Adam Domurad. [<a href="media/multitasking.wmv">multitasking.wmv</a> (49MB)]<p>


<div class="row">
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="media/multitasking.mp4"></iframe>
</div>
</div>


			<h3>Camera Handoffs</h3>

                    <p class="caption">A video showing a Visual Processing Client connected to a static wide field of view camera handing off
                    a pedestrian to another Visual Processing Client connected to an active pan\tilt\zoom camera. [<a href="media/handoff.wmv">handoff.wmv</a> (3.7MB)]<p>


<div class="row">
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="media/handoff.mp4"></iframe>
</div>
</div>



                <h2>Installation</h2>
                <p>Get the code from <a href="https://github.com/vclab/virtual-vision-simulator">https://github.com/vclab/virtual-vision-simulator</a>.</p>
            <h3>Linux</h3>
                The system is developed on Ubuntu 10.10 using packages from the ubuntu
                repository. The following packages have to be installed:
                <ul>
                    <li>python2.6</li>
                    <li>python-numpy 1.3.0 <a href="http://sourceforge.net/projects/numpy/files/NumPy/1.3.0/">http://sourceforge.net/projects/numpy/files/NumPy/1.3.0/</a></li>
                    <li>python-matplotlib 0.99.3 <a href="http://sourceforge.net/projects/matplotlib/files/matplotlib/matplotlib-0.99.3/">http://sourceforge.net/projects/matplotlib/files/matplotlib/matplotlib-0.99.3/</a></li>
                    <li>python-opencv 2.1.0 <a href="http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.1/">http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.1/</a></li>
                    <li>python-wxgtk2.8 2.8.11 <a href="http://packages.ubuntu.com/search?keywords=python-wxgtk2.8">http://packages.ubuntu.com/search?keywords=python-wxgtk2.8</a></li>
                    <li>panda3d 1.7.2 from <a href="http://www.panda3d.org/download.php?platform=ubuntu&version=1.7.2&sdk">http://www.panda3d.org/download.php?platform=ubuntu&version=1.7.2&sdk</a></li>
                </ul>
                <h3>Windows</h3>
                <ul>
                    <li>Install all of the libraries provided in the depenencies/windows folder. Make sure you install Panda3D first.</li>

                    <li>Copy <strong>cv.lib</strong> and <strong>cv.pyd</strong> from the OPENCV_DIR\Python2.6\Lib\site-packages\ directory to the PANDA3D_DIR\python\Lib\site-packages\ directory. </li>
                    <ul>
                        <li>OPENCV_DIR is your opencv directory. By default this is C:\OpenCV2.1</li>
                        <li>PANDA3D_DIR is your panda3D directory. By default this is C:\Panda3D-1.7.2</li>
                    </ul>
                    <li>Make sure OPENCV_DIR\bin is added to your Path</li>
                </ul>

                <!-- NOTE: It is best to not have any version of python installed. This can affect where
                the libraries need to run the virtual vision simulator will be installed.

                When installing the python libraries, make sure that the installer finds the version of python that comes with Panda3D.

                <ol class="instructions">
                    <li>Go into the dependencies/windows folder. This folder includes all of the necessary libraries needed to run the virtual vision simulator.</li>

                    <li>Install Panda3D-1.7.2which comes with python 2.6. You can use all of the default values.</li>

                    <li>Install numpy-1.6.0-win32-superpack-python2.6.</li>

                    <li>Install wxPython2.8-win32-unicode-2.8.12.0-py26.</li>

                    <li>Install matplotlib-1.0.1.win32-py.2.6.</li>

                    <li>Install OpenCV-2.1.0-win32-vs2008.</li>

                    <li>Copy OPENCV_DIR\Python2.6\Lib\site-packages\cv.lib and OPENCV_DIR\Python2.6\Lib\site-packages\cv.pyd to PANDA3D_DIR\python\Lib\site-packages folder. (OPENCV_DIR and PANDA3D_DIR are the directories where OpenCV and Panda3D were installed)</li>

                </ol>
                Your installation is now complete!
                Go to the Usage section to see how to run the virtual vision simulator. -->




                <h2>Usage</h2>

                All of the provided applications are located in the <b>src</b> folder.

                <h3>Simulator</h3>
                 Execute: <span class="execute">python 3D_Simulator.py [options]</span>
                Where options are the options listed below. <br/>
                NOTE: specifying a configuration directory is mandatory. <br/> <br/>


                Options:
                <pre class="options">
-d directory    Set the directory where the config files are located
-p port         Set the port the server should run on (default is 9099)
-a              Set the mode of the simulation controller to automatic (only used when server not needed)
-s              A Sync session is used to control the time
-h              Print this help message and exit
--debug         Show debug messages
                </pre>

                - <b>left</b> and <b>right</b> arrow keys switch between different cameras</br>
                - <b>escape</b> exits the applications</br>
                - <b>i</b> displays information about the simulator including ip address, port and camera types</br>

                <h3>Sync Client</h3>
                Execute: <span class="execute">python Sync_Client.py [options] ip_address:port ip_address:port ...</span> <br/>
                Where ip_address:port is replaced with the ip address and port of all the simulators<br/><br/>

                Options:
                <pre class="options">
--debug         Show debug messages
</pre>

                <h3>Sample Client</h3>
                Execute: <span class="execute">python sample_client.py [options]</span> <br/><br/>
                Options:
                <pre class="options">
- p port        Set the port of the virtual world
- a ip_address  Set the ip address of the virtual world
- s             Save the images received from the server
- h             Print this help message and exit
--debug         Show debug messages
</pre>


                <img src="media/Sample_Client.png"/>
                <p class="caption centered" >A screenshot of our sample client which gives a user control over a camera.</p>

                <h3>Getting Started Guide</h3>

                Please see the <a href="getting_started.html">Getting Started Guide</a> for step by step instructions on how to use our Virtual Vision Simulator.

                <h2>Configuring a Scenario</h2>
                <p>
                A scenario is made up of three config files which allow you to configure the
                scene, the cameras and the pedestrians. These three files must be called scene.xml,
                cameras.xml and pedestrians.xml and must be placed in a single folder which can be
                specified using the <code>-d</code> flag.
                </p>

                <h3>scene.xml</h3>
                The scene.xml file is used to configure the 3D models and lights that make up the scene. A sample is provided below.

                <pre class="prettyprint" style="font-size: medium; border:none;">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;scene&gt;
  &lt;models&gt;
    &lt;model path="../../media/scenes/office_floor/office_floor.egg" scale="25" pos="0 0 0" hpr="0 0 0" has_lighting='1'/&gt;
    &lt;model path="../../media/scenes/office_floor/skybox.egg" scale="25" pos="0 0 50" hpr="0 0 0" has_lighting='0'/&gt;
  &lt;/models&gt;
  &lt;lights&gt;
    &lt;light type="ambient" color="0.8 0.8 0.8 1.0"/&gt;
    &lt;light type="spotlight" casts_shadow="1" pos="-575 150 100" fov="170" exponent="1.5"/&gt;
    &lt;light type="spotlight" casts_shadow="1" pos="-575 -150 100" fov="170" exponent="1.5"/&gt;
  &lt;/lights&gt;
&lt;/scene&gt;</pre>
<h4>Model</h4>
                The following attributes must be set for all model tags:
                <ul>
                    <li><strong>path:</strong> The path to the 3D model relative to the scene.xml file</li>
                    <li><strong>scale:</strong> The scale of the model</li>
                    <li><strong>hpr:</strong> The heading, pitch and roll of the model in degrees (i.e. "180 0 0")</li>
                    <li><strong>has_lighting:</strong> Set to 1 if the model is affected by lighting.</li>
                </ul>

                Our simulator supports three types of lights: ambient, directional and spotlight.

                <h4>Ambient Light</h4>
                Mandatory Attributes
                <ul>
                    <li><strong>type:</strong> ambiant</li>
                    <li><strong>color:</strong> the color of the ambient light in the form of RGBA values between 0 and 1 (i.e. "0.8 0.8 0.8 1.0")</li>
                </ul>
                <h4>Spotlight</h4>
                Mandatory Attributes
                <ul>
                    <li><strong>type:</strong> spotlight</li>
                    <li><strong>pos:</strong> The position of the light in x, y, z coordinates (i.e. "300 150 100")</li>
                </ul>
                Optional Attributes
                <ul>
                    <li><strong>fov:</strong> The field of view angle of the light in degrees</li>
                    <li><strong>casts_shadow:</strong> 1 if the light casts shadows, 0 otherwise</li>
                    <li><strong>shadow_caster:</strong> The size of the shadow caster. Values should be multiples of 2. (i.e. "2048 2048")</li>
                    <li><strong>pitch:</strong> The pitch of the light in degrees. The default is -90.</li>
                    <li><strong>near:</strong> The near plane of the light</li>
                    <li><strong>far:</strong> The far plane of the light</li>
                    <li><strong>exponent:</strong> Sets the exponent that controls the amount of light falloff from the center of the spotlight</li>
                    <li><strong>color:</strong> The color of the light in the form of RGBA values between 0 and 1 (i.e. "0.5 0.5 0.5 1.0")</li>
                </ul>

                <h4>Directional Light</h4>
                Mandatory Attributes
                <ul>
                    <li><strong>type:</strong> directional</li>
                    <li><strong>pos:</strong> The position of the light in x, y, z coordinates</li>
                    <li><strong>hpr:</strong> The heading pitch and roll of the model in degrees</li>
                </ul>
                Optional Attributes
                <ul>
                    <li><strong>casts_shadow:</strong> 1 if the light casts shadows, 0 otherwise</li>
                    <li><strong>shadow_caster:</strong> The size of the shadow caster. Values should be multiples of 2. (i.e. "2048 2048")</li>
                    <li><strong>near:</strong> The near plane of the light</li>
                    <li><strong>far:</strong> The far plane of the light</li>
                    <li><strong>color:</strong> The color of the light in the form of RGBA values between 0 and 1 (i.e. "0.5 0.5 0.5 1.0")</li>
                    <li><strong>film_size:</strong> A rectangle that defines the region that will be affected by the light. (i.e. "512 512")</li>
                </ul>

                <h3>cameras.xml</h3>
                The cameras.xml file is used to configure the cameras. The sample provided below shows all of the options that are currently available. Most of these options should be self explanatory however, we would like to point out that the id of each camera must be unique and the default_direction is the direction the camera faces when the pan and tilt values are 0.

                <pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;cameras>
    &lt;camera type="rc_camera"&gt;
        &lt;color&gt;0 255 0&lt;/color&gt;
        &lt;id&gt;1&lt;/id&gt;
        &lt;position&gt;-575 90 -320&lt;/position&gt;
        &lt;up_vector&gt;0 1 0&lt;/up_vector&gt;
        &lt;near_plane&gt;1&lt;/near_plane&gt;
        &lt;far_plane&gt;100000&lt;/far_plane&gt;
        &lt;constraints&gt;
            &lt;fov_limits&gt;30 100&lt;/fov_limits>&gt;
            &lt;pan_limits&gt;-30 30&lt;/pan_limits>&gt;
            &lt;tilt_limits&gt;-30 30&lt;/tilt_limits&gt;
        &lt;/constraints&gt;
        &lt;default_direction&gt;0 -2 4&lt;/default_direction&gt;
        &lt;default_fov&gt;100&lt;/default_fov&gt;
        &lt;fov&gt;100&lt;/fov&gt;
    &lt;/camera&gt;
&lt;/cameras&gt;</pre>

                <h3>pedestrians.xml</h3>
                The pedestrians.xml file is used to configure all of the pedestrians and their trajectories.

                <pre class="prettyprint">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;pedestrians&gt;
    &lt;pedestrian character='CMan0011' texture='CMan0011_3.png' pos='-780 0 -50' scale='25' hpr='0 0 0'&gt;
        &lt;commands start_time='10'&gt;walk walk l90 walk walk 180 walk walk stand&lt;/commands&gt;
    &lt;pedestrian&gt;
&lt;/pedestrians&gt;</pre>

                <h4>Pedestrian Attributes</h4>
                <ul>
                    <li><strong>character:</strong> One of CMan0011, CMan0012 or CMan0013</li>
                    <li><strong>texture:</strong> The name of a texture file (see media/characters/CHARACTER_NAME/textures)</li>
                    <li><strong>pos:</strong> The starting position of the pedestrian in x, y, z coordinates. (i.e. "-350 0 -10")</li>
                    <li><strong>scale:</strong> The scale of the model</li>
                    <li><strong>hpr:</strong> The heading, pitch and roll of the model. (i.e. "180 0 0")</li>
                </ul>

                <h4>Commands</h4>
                The commands tag contains a list of the commands that the pedestrian will execute. The available commands are:
                <ul>
                    <li><strong>walk</strong> does one walk cycle</li>
                    <li><strong>run</strong> does one run cycle</li>
                    <li><strong>stand</strong> stands inplace</li>
                    <li><strong>180</strong> does an about turn</li>
                    <li><strong>l45</strong> does a 45 degree turn to the left</li>
                    <li><strong>r45</strong> does a 45 degree turn to the right</li>
                    <li><strong>r90</strong> does a 90 degree turn to the right</li>
                    <li><strong>l90</strong> does a 90 degree turn to the left</li>
                </ul>
                Additionally, you can use the <em>start_time</em> attribute to specify when the pedestrian will start executing its list of commands.
                <h2>Custom Client</h2>

                Our simulator allows researchers to write their own clients which can get images
                from cameras and tune their parameters using a light weight packet structure. The messages that a custom client can send and receive are provided below. Please see <strong>sample_client.py</strong> to see how these messages can be implemented.

                <h3>Messages that a client can send</h3>
                <table class="message">
                    <tr>
                        <th colspan=3>VP_SESSION (100)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">connection id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">type</td>
                        <td class="type">char</td>
                        <td class="description"><strong>This value should be set to 1<strong></td>
                    </tr>
                    <tr>
                        <td class="name">camera type</td>
                        <td class="type">char</td>
                        <td class="description">0 for static or 1 for ptz</td>
                    </tr>
                </table>
                <br/>
                <table class="message">
                    <tr>
                        <th colspan=3>VP_CAM_PAN (105)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">connection_id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">camera id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">angle</td>
                        <td class="type">float</td>
                        <td class="description">The pan angle in degrees. Pans right if positive, left if negative value</td>
                    </tr>
                </table>
                <br/>
                <table class="message">
                    <tr>
                        <th colspan=3>VP_CAM_Tilt (106)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">connection_id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">camera id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">angle</td>
                        <td class="type">float</td>
                        <td class="description">The tilt angle in degrees. Tilts up if positive, down if negative</td>
                    </tr>
                </table>
                <br/>
                <table class="message">
                    <tr>
                        <th colspan=3>VP_CAM_ZOOM (107)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">connection_id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">camera id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">angle</td>
                        <td class="type">float</td>
                        <td class="descrption">The angle to change the field of view by
                        in <br/>degrees. Zooms out if positive, in if negative</td>
                    </tr>
                </table>
                <br/>
                <table class="message">
                    <tr>
                        <th colspan=3>VP_CAM_DEFAULT (108)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">connection_id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">camera id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                </table>
                <br/>
                <table class="message">
                    <tr>
                        <th colspan=3>VP_CAM_IMAGE (109)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">connection_id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">camera id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                </table>
                <br/>
                <table class="message">
                    <tr>
                        <th colspan=3>VP_CAM_RESOLUTION (110)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">connection_id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">camera id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">width</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">height</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                </table>

                <h3>Messages that a client will receive</h3>
                <table class="message">
                    <tr>
                        <th colspan=3>VV_ACK_OK (0)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">server ip</td>
                        <td class="type">string</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">server port</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">client id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                </table>
                <br/>
                <table class="message">
                    <tr>
                        <th colspan=3>VV_VP_ACK_OK (9)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">server ip</td>
                        <td class="type">string</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">server port</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">camera id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                </table>

                <br/>
                <table class="message">
                    <tr>
                        <th colspan=3>VV_REQ_VIDEO_ANALYSIS (5)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">server ip</td>
                        <td class="type">string</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">server port</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">camera id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">image width</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">image height</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">jpeg</td>
                        <td class="type">bool</td>
                        <td class="description"></td>
                    </tr>
                </table>
                <br/>
                <table class="message">
                    <tr>
                        <th colspan=3>VV_IMG (2)</th>
                    </tr>
                    <tr>
                        <td class="name">message type</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">server ip</td>
                        <td class="type">string</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">server port</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">camera id</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">image width</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">image height</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">image depth</td>
                        <td class="type">int</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">color code</td>
                        <td class="type">char</td>
                        <td class="description">The color codes are RGB(0), BGR(1), RRRGGGBBB(2), BGRA(3)</td>
                    </tr>
                    <tr>
                        <td class="name">jpeg</td>
                        <td class="type">bool</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">frame timestamp</td>
                        <td class="type">long</td>
                        <td class="description"></td>
                    </tr>
                    <tr>
                        <td class="name">image data</td>
                        <td class="type">string</td>
                        <td class="description"></td>
                    </tr>
                </table>
                <br /><br />
                Before a custom client can begin to control a camera, it must first complete the connection handshake shown in the diagram bellow. Once connected, the custom client
                will automatically be assigned a camera. If a camera of the specified type is not available, the connection will fail.
                <br /><br />
                <img src="media/client_server_communication.png"/>
                <p class="caption centered" >The communication between a custom client and a Virtual Vision Simulator</p>
                <h2>Acknowledgments</h2>

                We would like to thank <a href="http://vclab.science.uoit.ca/~domurad/">Adam Domurad</a> for his contributions to the Visual Processing Client which allowed us to test our simulator with a real pedestrian tracker.
            </div> <!-- Main Content -->
        </div> <!-- Container -->
    </body>
</html>